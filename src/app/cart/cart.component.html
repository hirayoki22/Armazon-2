<div *ngIf="viewCart" class="overlay" (click)="overlayClick($event)">
  <section class="cart">
    <div class="top">
      <p>Shopping Cart</p>

      <button 
        (click)="onClose()" 
        type="button" class="close-btn" title="Close">
        <i class="material-icons">close</i>
      </button>
    </div>

    <div *ngIf="!cartItems?.length && !isLoading;" class="empty-cart-msg">
      <h3>Your cart is empty</h3>
    </div>

    <div 
      *ngIf="cartItems?.length && !isLoading;" 
      class="content">
      <ul class="item-list">
        <li *ngFor="let product of cartItems">
          <div *ngIf="product.productImage" class="product-image">
            <img [src]="product.productImage" [alt]="product.productName">
          </div>

          <div class="product-info">
            <a href="#" class="product-name">
              {{ product.productName | textClip:80 }}
            </a>
    
            <p class="price">{{ product.price | currency }}</p>

            <div class="options">
              <label for="quantity">
                Quantity: 
                <input 
                  [value]="product.quantity"
                  name="quantity"
                  id="quantity"
                  type="number" min="1" [max]="product.totalStock">
              </label>

              <button 
                (click)="onRemove(product.productId)"
                class="remove-btn">Remove</button>
            </div>
          </div>
        </li>
      </ul>
    </div>

    <div *ngIf="cartItems?.length && !isLoading" class="bottom">
      <div class="subtotal">
        <span class="subtotal-items">Items: <strong>{{ itemCount | number }}</strong></span>
        <span class="subtotal-amount">Subtotal: <strong>{{ subtotal | currency }}</strong></span>
      </div>

      <button>Proceed to Checkout</button>
    </div>

    <app-spinner [loading]="isLoading"></app-spinner>
  </section>
</div>
