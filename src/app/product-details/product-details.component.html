<app-spinner [loading]="isLoading" overlayStyle="fixed"></app-spinner>

<section  class="product-detail-section">
  <div class="wrapper">
    <div class="banner"></div>

    <div [style.display]="isLoading ? 'none' : 'flex'" class="details-container">
      <div class="product-images" [class.reloading]="reolading">
        <!-- Large screen -->
        <div class="preview-l">
          <img 
            image-loader
            [src]="product?.images[activePreview]" 
            [alt]="product?.productName"
            draggable="false">
        </div>

        <!-- Small Screen -->
        <div class="preview-s-wrapper">
          <ul (scroll)="onPreviewScroll($event.target)" class="preview-s">
            <li *ngFor="let image of product?.images;" class="slide">
              <img image-loader [src]="image" [alt]="product?.productName">
            </li>
          </ul>
  
          <div class="indicator-wrapper">
            <span 
              *ngFor="let i of product?.images; index as index" 
              class="indicator"
              [class.active]="activePreview == index"></span>
          </div>
        </div>
  
        <div class="thumbnail-wrapper">
          <button 
            (click)="onNavBtnClick('before')"
            #navButton class="nav-btns nav-left" 
            disabled>
            <i class="material-icons">arrow_left</i>
          </button>
  
          <ul #thumbnailList class="thumbnail-list">        
            <li 
              (mouseover)="activePreview = index"
              (click)="activePreview = index"
              *ngFor="let thumbnail of product?.images; index as index" 
              class="thumbnail"
              [class.active]="activePreview == index">

              <img 
                image-loader
                [src]="thumbnail" 
                [alt]="product?.productName"
                draggable="false">
            </li>
          </ul>
  
          <button 
            (click)="onNavBtnClick('next')"
            #navButton class="nav-btns nav-right">
            <i class="material-icons">arrow_right</i>
          </button>          
        </div>
      </div>
  
      <div class="product-information">  
        <div class="content">
          <div [class.reloading]="reolading">
            <h3 class="product-name">{{ product?.productName }}</h3>
            <p class="brand">By: <span>{{ product?.brand }}</span></p> 
            <p class="price">
              Price: <strong>{{ product?.price | currency }}</strong>
            </p>

            <div [ngSwitch]="product?.available" >
              <div *ngSwitchCase="false">
                <p class="unavailable-message">Currently unavailable</p>
              </div>
              <div *ngSwitchDefault>
                <p 
                  class="stock-label"
                  [class.not-in-stock]="!product?.totalStock">
                  {{ product?.totalStock > 0 ? 'In stock' : 'Not in stock' }}
                </p>   
              </div>
            </div>    
          </div>

          <variant-section 
            [variants]="variants"
            (variantId)="updateProductInfo($event)"></variant-section>
        </div>
  
        <div class="action-buttons">
          <button 
            (click)="onBuyNow(product?.productId)"
            type="button" class="buy-now-btn">Buy Now</button>
  
          <button 
            (click)="onAddToCart(product?.productId)"
            type="button" class="add-to-cart-btn">
            <i class="material-icons">add_shopping_cart</i>
            <span>Add to cart</span>
          </button>
        </div>
  
        <div class="about-product" [class.reloading]="reolading">
          <h3>About this item:</h3>          
          <p [innerHTML]="product?.productDesc"></p>
        </div>
      </div>
    </div>

  </div>
</section>
