<section class="product-form-section">

  <form 
    [formGroup]="productForm" 
    (ngSubmit)="onSubmit()"
    id="productForm">
    <app-spinner *ngIf="isLoading" [loading]="isLoading"></app-spinner>

    <div class="column-s">
      <div class="form-group">
        <label>Product name</label>
        <input formControlName="productName">
      </div>
  
      <div class="form-group">
        <label>Brand</label>
        <input formControlName="brand">
      </div>

      <div class="form-group">
        <label>Price</label>
        <input formControlName="price" type="number" min="0" step="0.1">
      </div>

      <div class="form-group">
        <label>Category</label>
        <select formControlName="categoryId">
          <option [ngValue]="null">Choose a Category</option>
          <option 
            *ngFor="let category of categories" 
            [ngValue]="category.categoryId">
            {{ category.category }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label>Description</label>
        <textarea formControlName="productDesc" cols="30" rows="5"></textarea>
      </div>

      <div class="form-group">
        <label>Total in stock</label>
        <input formControlName="totalStock" type="number" min="1">
      </div>

      <div class="form-group-2">
        <input 
          (change)="isVariant = !isVariant" 
          type="checkbox" id="variant">
        <label for="variant">Mark as product variant</label>
      </div>

      <div
        *ngIf="isVariant" 
        formArrayName="variantInfo"
        class="variant-fields"> 
        <div [formGroupName]="0" class="">
          <div class="form-group">
            <label>Original product ID</label>
            <input formControlName="originalProductId" type="number">
          </div>
          
          <div class="form-group">
            <label>Option</label>
            <select formControlName="optionId">
              <option [ngValue]="null">Choose an Option</option>
              <option 
                *ngFor="let option of variantOptions" 
                [ngValue]="option.optionId">
                {{ option.option }}
              </option>
            </select>
          </div>
  
          <div class="form-group">
            <label>Value label</label>
            <input formControlName="optionValue">
          </div>
        </div>
      </div>
  
      <div class="form-group">
        <button 
          
          class="add-btn add-btn-1"
          type="submit">Add to inventory</button>
      </div>
    </div>

    <div class="column-l">
      <app-image-uploader formControlName="images"></app-image-uploader>
    </div>

    <div class="add-btn-2">
      <button 
        [disabled]="productForm.invalid" 
        class="add-btn"
        type="submit">Add to inventory</button>
    </div>
  </form>

</section>
