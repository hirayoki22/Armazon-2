<app-modal 
  [width]="'60vw'"
  [height]="'90vh'"
  [showModal]="showForm" 
  (showModal)="onClose()">
  <div class="container" [class.review-submitted]="reviewSubmitted">

    <div *ngIf="!isLoading && !reviewSubmitted" class="scrollable-area">
      <div class="product-details">
        <div class="product-image">
          <img image-loader [src]="product?.images[0]" [alt]="product.productName">    
        </div>
  
        <h3 class="product-name">{{ product.productName }}</h3>
      </div>

      <div *ngIf="userReviewExists" class="error-feedback">
        <p>You already reviewed this item</p>
      </div>

      <div class="form-group">
        <label>Overall rating</label>
        <star-rating             
          [newRating]="true"
          [overall]="rating"
          (selectedRating)="onRatingSelection($event)"
          [class.read-only]="userReviewExists"></star-rating>
      </div>

      <dynamic-form
        #form
        [fields]="fields"
        [disableFeedback]="true"
        [disableSubmit]="true"
        (onSubmit)="onSubmit($event)"></dynamic-form>

      <!-- <form [formGroup]="reviewForm" (ngSubmit)="onSubmit()" id="review-form">
        <div class="form-group">
          <label>Overall rating</label>
          <star-rating             
            [newRating]="true"
            [overall]="rating"
            (selectedRating)="onRatingSelection($event)"
            [class.read-only]="userReviewExists"></star-rating>
        </div>
        
        <div class="form-group">
          <label>Add a headline</label>
          <input formControlName="headline" 
            [readonly]="userReviewExists">
        </div>
  
        <div class="form-group">
          <label>Wire your review</label>
          <textarea formControlName="review" 
            [readonly]="userReviewExists" rows="7"></textarea>
        </div>
  
        <div class="form-group">
          <button 
            [disabled]="reviewForm.invalid || userReviewExists"
            class="btn-xl submit-btn">Submit</button>
        </div>
      </form> -->
    </div>

    <div *ngIf="reviewSubmitted" class="success-msg">
      <h3>Thank you for your review!</h3>

      <div class="icon">
        <i class="material-icons">done</i>
      </div>
    </div>

    <app-spinner [loading]="isLoading"></app-spinner>
  </div>
</app-modal>